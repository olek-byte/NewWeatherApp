@use './globals' as *;

/* RESET И БАЗОВЫЕ СТИЛИ */

/* 1) Коробка и базовые отступы */
*,
*::before,
*::after { 
  box-sizing: border-box; 
}

:where(html, body) { 
  height: 100%; 
}

:where(body) {
  margin: 0;
  line-height: $line-height-normal;
  font-size: $font-size-base;
  color: $text-primary;
  -webkit-font-smoothing: antialiased;
  text-rendering: optimizeLegibility;
  background: $gradient-main;
  min-height: 100vh;
}

/* 2) Медиа */
:where(img, svg, video, canvas, audio, iframe) { 
  display: block; 
  max-width: 100%; 
}
:where(img) { 
  height: auto; 
}

/* 3) Типографика по умолчанию */
:where(p, h1, h2, h3, h4, h5, h6, figure, blockquote) { 
  margin: 0; 
}
:where(ul[role="list"], ol[role="list"]) { 
  list-style: none; 
  margin: 0; 
  padding: 0; 
}

/* 4) Формы и кнопки */
:where(button, input, select, textarea) {
  font: inherit;
  color: inherit;
  background: none;
  border: none;
}
:where(button) { 
  cursor: pointer; 
}
:where(textarea) { 
  resize: vertical; 
}

/* 5) Ссылки и фокус */
:where(a) { 
  color: inherit; 
  text-decoration: none; 
}
:where(:focus-visible) { 
  outline: auto; 
  outline-offset: 2px; 
}

/* 6) Системные сокращения */
:where(table) { 
  border-collapse: collapse; 
}

/* 7) Анимации по уважению к пользователю */
@media (prefers-reduced-motion: reduce) {
  * { 
    animation: none !important; 
    transition: none !important; 
    scroll-behavior: auto !important; 
  }
}

/*  UTILITY КЛАССЫ */

.u-card {
  @include card();
}

.u-glass {
  @include glassmorphism();
}

.u-hover-lift {
  @include hover-lift();
}

.u-button-press {
  @include button-press();
}

.u-fade-in {
  @include fade-in();
}

.u-slide-up {
  @include slide-up();
}

.u-skeleton {
  @include skeleton();
}

/* ТИПОГРАФИКА УТИЛИТЫ */

.font-monospace {
  font-family: 'Courier New', Courier, monospace !important;
  font-size: $font-size-sm !important;
}

/* BOOTSTRAP ПЕРЕОПРЕДЕЛЕНИЯ */

// Стилизация форм
.form-control,
.form-select,
input[type="text"],
input[type="search"],
textarea {
  @include form-control();
}

// Стилизация кнопок
.btn {
  transition: $transition-all !important;
  @include hover-lift(-1px, $shadow-sm);
  @include button-press();
}

.btn-primary {
  @include gradient-button();
}

.btn-outline-primary {
  @include outline-button($color-primary, $color-primary);
}

.btn-outline-secondary {
  @include outline-button(rgba($color-primary-light, 0.7), $gradient-form);
  
  &:hover, &:focus {
    color: $color-primary-dark !important;
  }
}

.btn-success {
  @include gradient-button(
    linear-gradient(135deg, $color-success 0%, $color-success-dark 100%),
    linear-gradient(135deg, $color-success-dark 0%, darken($color-success-dark, 10%) 100%)
  );
}

.btn-outline-danger {
  @include outline-button($color-error, $color-error);
}

// Стилизация карточек Bootstrap
.card {
  @include card();
  box-shadow: $shadow-blue !important;
  
  .card-header {
    background: rgba($color-primary-light, 0.1) !important;
    border-bottom: 1px solid rgba($color-primary-light, 0.2) !important;
  }
  
  .card-body {
    background: transparent !important;
  }
}

// Стилизация модальных окон
.modal-content {
  @include glassmorphism($gradient-card, $blur-xl, rgba($color-white, 0.3));
  box-shadow: $shadow-blue-lg !important;
}

.modal-header {
  background: rgba($color-primary-light, 0.1) !important;
  border-bottom: 1px solid rgba($color-primary-light, 0.2) !important;
}

.modal-footer {
  background: rgba($color-primary-light, 0.05) !important;
  border-top: 1px solid rgba($color-primary-light, 0.2) !important;
}

// Стилизация алертов
.alert {
  @include glassmorphism(rgba($color-white, 0.8), $blur-md, rgba($color-white, 0.2));
  
  &.alert-info {
    background: rgba(225, 245, 254, 0.8) !important;
    border-color: rgba($color-primary-light, 0.3) !important;
    color: $color-primary-dark !important;
  }
  
  &.alert-success {
    background: rgba(232, 245, 233, 0.8) !important;
    border-color: rgba($color-success, 0.3) !important;
    color: $color-success-dark !important;
  }
  
  &.alert-danger {
    background: rgba(255, 235, 238, 0.8) !important;
    border-color: rgba($color-error, 0.3) !important;
    color: $color-error-dark !important;
  }
  
  &.alert-light {
    background: rgba($color-white, 0.6) !important;
    border-color: rgba($color-primary-light, 0.2) !important;
  }
}

// Стилизация дропдаунов
.dropdown-menu {
  @include glassmorphism($gradient-card, $blur-lg, rgba($color-white, 0.3));
  box-shadow: $shadow-blue !important;
  
  .dropdown-item {
    &:hover, &:focus {
      background: rgba($color-primary-light, 0.1) !important;
      color: $color-primary-dark !important;
    }
  }
}

// Стилизация таблиц
.table {
  th {
    border-top: none !important;
    font-weight: $font-weight-semibold !important;
    color: $text-secondary !important;
    background: rgba($color-primary-light, 0.05) !important;
  }
  
  td {
    color: $text-primary !important;
    border-color: rgba($color-primary-light, 0.1) !important;
  }
  
  &.table-striped {
    tbody tr:nth-of-type(odd) {
      background: rgba($color-primary-light, 0.03) !important;
    }
  }
  
  &.table-hover {
    tbody tr:hover {
      background: rgba($color-primary-light, 0.08) !important;
    }
  }
}

/* ТЕКСТОВЫЕ УТИЛИТЫ */

.text-primary {
  color: $text-primary !important;
}

.text-secondary {
  color: $text-secondary !important;
}

.text-muted {
  color: $text-muted !important;
}

.text-light {
  color: $text-light !important;
}

.text-white {
  color: $text-white !important;
}

.text-on-primary {
  color: $text-on-primary !important;
}

/* СПЕЙСИНГ УТИЛИТЫ */

.spacing-xs { margin: $spacing-xs !important; }
.spacing-sm { margin: $spacing-sm !important; }
.spacing-md { margin: $spacing-md !important; }
.spacing-lg { margin: $spacing-lg !important; }
.spacing-xl { margin: $spacing-xl !important; }
.spacing-2xl { margin: $spacing-2xl !important; }
.spacing-3xl { margin: $spacing-3xl !important; }

.p-xs { padding: $spacing-xs !important; }
.p-sm { padding: $spacing-sm !important; }
.p-md { padding: $spacing-md !important; }
.p-lg { padding: $spacing-lg !important; }
.p-xl { padding: $spacing-xl !important; }
.p-2xl { padding: $spacing-2xl !important; }
.p-3xl { padding: $spacing-3xl !important; }